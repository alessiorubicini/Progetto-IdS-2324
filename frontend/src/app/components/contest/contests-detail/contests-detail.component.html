<div class="container mt-5">

	<ng-container *ngIf="!contest">
		<div class="alert alert-danger" role="alert">
			Error 404: that contest does not exist.
		</div>
		<a [routerLink]="['../../']">Back to the city</a>
	</ng-container>

	<ng-container *ngIf="city && contest && author">

		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a [routerLink]="['/home']">Home</a></li>
				<li class="breadcrumb-item"><a [routerLink]="['/city', city.id]">{{ city.name }}</a></li>
				<li class="breadcrumb-item active">{{ contest.title }}</li>
			</ol>
		</nav>

		<h2>{{ contest.title }}</h2>
		<h6>Published on {{ contest.publicationDate.getDate() }}.{{contest.publicationDate.getMonth()+1}}.{{contest.publicationDate.getFullYear()}} by <a [routerLink]="['/user', author.id]">{{author.username}}</a></h6>

		<div class="row mt-3">
			<div class="col-sm-6">
				<ul class="list-group">
					<li class="list-group-item"><p>{{ contest!.description }}</p></li>
					<li class="list-group-item">Closing date: {{ contest.closingDate.getDate() }}.{{contest.closingDate.getMonth()+1}}.{{contest.closingDate.getFullYear()}}</li>
				</ul>

				<div class="countdown" data-mdb-countdown-init="2024-01-01T12:00:00Z,2024-12-31T23:59:59Z" data-mdb-countdown-on-finish="function() { alert('Il conto alla rovescia Ã¨ terminato!');}">

				</div>
			</div>
		</div>

		<div *ngIf="proposedContents" class="mt-4">

			<h6>Proposed contents:</h6>

			<div class="input-group mb-3">
				<input type="text" class="form-control" placeholder="Search content" [(ngModel)]="searchQuery" (input)="searching = true" (focusout)="searching = false">
			</div>

			<div class="row">
				<div class="col-lg-4 mb-4" *ngFor="let content of contents; let i = index">
					<div class="card">
						<img src="{{ content.mediaUrl }}" class="card-img-top" alt="...">
						<div class="card-body">
							<h5 class="card-title">{{ content.title }}</h5>
							<p class="card-text"><small class="text-body-secondary">Last updated 3 mins ago</small></p>
							<a class="card-link" [routerLink]="['../../', 'points', content.pointId, 'contents', content.id]">View content</a>
						</div>
					</div>
				</div>
			</div>

		</div>

		<ng-container *ngIf="!proposedContents">
			<p class="text-danger">Error while loading proposed contents for this contest.</p>
		</ng-container>

	</ng-container>

</div>
