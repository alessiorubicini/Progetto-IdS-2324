<div class="container mt-5">

	<ng-container *ngIf="!city">
		<div class="alert alert-danger" role="alert">
			Error 404: that city does not exist.
		</div>
		<a [routerLink]="['../../']">Back to the city</a>
	</ng-container>

	<ng-container *ngIf="!point">
		<div class="alert alert-danger" role="alert">
			Error 404: that point does not exist.
		</div>
		<a [routerLink]="['../../']">Back to the city</a>
	</ng-container>

	<ng-container *ngIf="city && point">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a [routerLink]="['/home']">Home</a></li>
				<li class="breadcrumb-item"><a [routerLink]="['/city', city.id]">{{ city.name }}</a></li>
				<li class="breadcrumb-item active">{{ point.name }}</li>
			</ol>
		</nav>

		<h2>{{ point.name }}</h2>

		<div class="row mt-3">
			<div class="col-sm-6">
				<p>{{ point.description }}</p>
					<button type="button" class="btn btn-outline-danger">Report <i class="bi bi-exclamation-octagon-fill"></i></button>
					<ng-container *ngIf="api.auth.authenticated">
						<!-- <button type="button" class="btn btn-outline-danger" (click)="removePoint()">Delete <i class="bi bi-trash"></i></button> -->

						<button type="button" class="btn btn-outline-danger mx-2" data-bs-toggle="modal" data-bs-target="#exampleModal">Delete <i class="bi bi-trash"></i></button>

						<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
							<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
								<h1 class="modal-title fs-5" id="exampleModalLabel">Attention!</h1>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body"> Are you sure you want to delete this point? </div>
								<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
								<button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="removePoint()">Delete point</button>
								</div>
							</div>
							</div>
						</div>
					</ng-container>
			</div>
			<div class="col-sm-6 ">
				<img class="point-image img-fluid" src="{{ point.imageUrl }}">
			</div>
		</div>

		<div class="row">
			<h3>Contents</h3>
			<div class="col-12" *ngIf="contents">
				<div class="row mt-3">
					<div class="row">
						<div class="col-lg-4 mb-4" *ngFor="let content of contents; let i = index">

							<div class="card">
								<img src="{{ content.mediaUrl }}" class="card-img-top" alt="...">
								<div class="card-body">
									<h5 class="card-title">{{ content.title }}</h5>
									<p class="card-truncate-text">{{ content.description }}</p>
									<p class="card-text"><small class="text-body-secondary">Published on {{ content.publicationDate }}</small></p>
									<a [routerLink]="['contents', content.id]" class="card-link">Learn more</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-12">
				<div class="row mt-3" *ngIf="point.longitude && point.latitude">
					<app-osm-map
						[centerCoordinates]="[point.longitude, point.latitude]"
						[zoomLevel]="18"
						[items]="[this.point]"
						[isForCity]="false"
					></app-osm-map>
				</div>
			</div>
		</div>


	</ng-container>

</div>