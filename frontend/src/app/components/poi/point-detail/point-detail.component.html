<div class="container mt-5">

	<ng-container *ngIf="!point">
		<div class="alert alert-danger" role="alert">
			Errore 404: questo punto non esiste!
		</div>
		<a [routerLink]="['../../']">Back to the city</a>
	</ng-container>

	<ng-container *ngIf="point">

		<h2>{{ point.name }}</h2>

		<div class="row mt-3">
			<div class="col-sm-6">
				<p>{{ point.description }}</p>

				<div class="btn-group" role="group" aria-label="Basic example">


					<ng-container *ngIf="api.auth.authenticated">
						<button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">Elimina <i class="bi bi-trash"></i></button>

						<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
							<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
								<h1 class="modal-title fs-5" id="exampleModalLabel">Attenzione!</h1>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">Sei sicur* di eliminare questo contenuto?</div>
								<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
								<button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deletePoint()">Conferma</button>
								</div>
							</div>
							</div>
						</div>

					</ng-container>

				<button type="button" class="btn btn-outline-danger">Segnala <i class="bi bi-exclamation-octagon-fill"></i></button>
				</div>
			</div>
			<div class="col-sm-6 ">
				<img class="point-image img-fluid" src="{{ point.imageUrl }}">
			</div>
		</div>

		<div class="row">
			<h3>Contenuti</h3>

			<ng-container *ngIf="api.auth.authenticated">
				<div class="col-12">
					<button class="btn btn-outline-primary" [routerLink]="['create-content']"><i class="bi bi-plus"></i> Proponi Contenuto</button>
				</div>
			</ng-container>

			<div class="col-12" *ngIf="point.contents">
				<div class="row mt-3">
					<div class="row">
						<div class="col-lg-4 mb-4" *ngFor="let content of point.contents; let i = index">

							<div class="card">
								<img src="{{ content.mediaUrl }}" class="card-img-top" alt="...">
								<div class="card-body">
									<h5 class="card-title">{{ content.title }}</h5>
									<p class="card-truncate-text">{{ content.description }}</p>
									<p class="card-text"><small class="text-body-secondary">Pubblicato il {{ content.publicationDate }}</small></p>
									<a [routerLink]="['contents', content.id]" class="card-link">Dettagli</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-12">
				<div class="row mt-3" *ngIf="point.longitude && point.latitude">
					<app-osm-map
						[centerCoordinates]="[point.longitude, point.latitude]"
						[zoomLevel]="18"
						[items]="[this.point]"
						[isForCity]="false"
					></app-osm-map>
				</div>
			</div>
		</div>


	</ng-container>

</div>
